@page "/Error"
@using System.Diagnostics

<PageTitle>Error</PageTitle>

<Heading TextColor="TextColor.Danger" Size="HeadingSize.Is1">Error.</Heading>
<Heading TextColor="TextColor.Danger" Size="HeadingSize.Is2">An error occurred while processing your request.</Heading>

@if (ShowRequestId)
{
    <Paragraph>
        <Strong>Request ID:</Strong> <Code>@RequestId</Code>
    </Paragraph>
}

<Heading Size="HeadingSize.Is3">Development Mode</Heading>
<Paragraph>
    Swapping to <Strong>Development</Strong> environment will display more detailed information about the error that occurred.
</Paragraph>
<Paragraph>
    <Strong>The Development environment shouldn't be enabled for deployed applications.</Strong>
    It can result in displaying sensitive information from exceptions to end users.
    For local debugging, enable the <Strong>Development</Strong> environment by setting the <Strong>ASPNETCORE_ENVIRONMENT</Strong> environment variable to <Strong>Development</Strong>
    and restarting the app.
</Paragraph>

@code{
[CascadingParameter]
private HttpContext? HttpContext { get; set; }

private string? RequestId { get; set; }
private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

protected override void OnInitialized() =>
    RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
